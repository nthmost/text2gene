<html>
<head>
    <title>Text2Gene HgvsQuery</title>
    <style>
            #left {
                width: 480px;
                float: left;
            }

            #right {
                margin-top: 40px;
                margin-left: 500px;
                padding-bottom: 20px;
            }

            .ncbi_tag {
                color: darkolivegreen;
            }

            .error {
                color: red;
            }

            .clear {
                clear: both;
            }
    </style>
</head>

<body>

<div class="clear">
    <h1>{{ hgvs_text }}</h1>
    <h4>Gene: {% if gene_info %}{{ gene_info.gene_name }}
        <a href="{{ gene_info.gtr_url }}"><button>GTR</button></a>
        <a href="{{ gene_info.medgen_url }}"><button>MedGen</button></a>
        <a href="{{ gene_info.pubmed_clinical_query_url }}"><button>Clinical Query</button></a>
        {% else %}(unknown){% endif %}</h4>
    <h4>Variant in ClinVar: {% if clinvar.url %}<a href="{{ clinvar.url }}"><button>{{ clinvar.variationID }}</button></a>
                                   {% else %}(unknown){% endif %}</h4>
    <span class="error">{{ error_msg }}</span>
</div>

<hr />

<div id="left">
    <h3>LVG Output</h3>
    <ul>
    {% for seqtype, hgvs_list in variants.iteritems() %}
    {% if hgvs_list %}{% for hgvs_text in hgvs_list %}
        {% if hgvs_text.startswith('NM_') or hgvs_text.startswith('NC_') %}
        <li><a href="/query/{{ hgvs_text }}">{{ hgvs_text }}</a>  {% if hgvs_text in ncbi_variants %}<span class="ncbi_tag">[NCBI]</span>{% endif %}</li>
        {% else %}
        <li>{{ hgvs_text }}  {% if hgvs_text in ncbi_variants %}<span class="ncbi_tag">[NCBI]</span>{% endif %}</li>
        {% endif %}
        {% endfor %}{% endif %}
    {% endfor %}
    </ul>
</div>

<div id="right">
    <h3><a href='https://www.google.com/?gws_rd=ssl#q={{ google_query }}'>Google Query</a></h3>

    <h3>Pubmed Sources</h3>

    <p><strong>ClinVar</strong></p>
    {% if clinvar.pmids %}
        <ul>{% for pmid in clinvar.pmids %}<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/{{ pmid }}">{{pmid}}</a></li>
           {% endfor %}
        </ul>
    {% else %}
        (None)
    {% endif %}

    <p><strong>Pubtator</strong></p>
    {% if pubtator.pmids %}
        <ul>{% for pmid in pubtator.pmids %}
        <li><a href="http://www.ncbi.nlm.nih.gov/CBBresearch/Lu/Demo/PubTator/curator_identifier.cgi?user=User63310122&pmid={{pmid}}&searchtype=PubMed_Search&query={{pmid}}&page=1&Species_display=1&Chemical_display=1&Gene_display=1&Disease_display=1&Mutation_display=1&tax=">{{pmid}}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        (None)
    {% endif %}

    <p><strong>NCBI Variation Reporter</strong></p>
    {% if ncbi.pmids %}
        <ul>{% for pmid in ncbi.pmids %}
        <li><a href="http://www.ncbi.nlm.nih.gov/pubmed/{{ pmid }}">{{pmid}}</a></li>
        {% endfor %}
        </ul>
    {% elif ncbi.report == None %}
        (NCBI Report unavailable for this variant)
    {% else %}
        (None)
    {% endif %}

    {% if lovd_url %}<h3><a href="{{ lovd_url }}">LOVD Search</a></h3>{% endif %}

</div>

<div class="clear">
    <hr />
    <h3>Google Query Expansion</h3>
    <p>{{ google_query }}</p>

    {% if found_in_clinvar_example_tables %}
    <hr /><h3>Found in Clinvar hgvs sample tables:</h3>
    <ul>{% for tname in found_in_clinvar_example_tables %}
    <li>{{ tname }}</li>
    {% endfor %}
    </ul>
    {% endif %}

</div>

</body>
</html>
